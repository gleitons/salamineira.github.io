<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VALIDADOR</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        .corpoContrato {
            width: 60%;
            margin: auto;

        }

        .validador {
            background-color: rgb(173, 181, 244);
            text-align: center;
            padding: 10px;
        }

        .validador img {
            width: 100%;
        }

        .validador p {
            font-size: 1.3em;

        }

        .lupa {
            background-color: white;
            width: fit-content;
            margin: 20px auto;
            padding: 5px;
            align-items: center;
            
        }

        .validador button {
            padding: 10px;
            margin: 10px auto;
        }

        .lupa input {
            border: none;
            outline: 0;
            padding: 2px;
        }

        .infoCompleta {
            text-align: center;
            padding: 20px;
            font-size: 1em;
            color: white;
        }

        .logoFuturo {
            position: fixed;
            bottom: 0px;
            left: 0px;
            height: 150px;
            margin: auto;
            text-align: center;
            background-color: white;
            width: 100%;
        }

        .logoFuturo img {
            width: 100%;
            height: 100%;
            padding: 10px;

        }
        .vermeio {
            background-color: red;
        }
        .verde {
            background-color: green;
        }

        .infoCompleta .informacao p {
            font-size: 1em;
        }

        @media (max-width: 565px) {
            .corpoContrato {
                width: 100%;
                height: 100vh;
            }

        }
    </style>
</head>

<body>
    <div class="corpoContrato">
        <div class="validador">
            <img src="./src/img/verifica-autenticidade.png" alt="">
            <p>Insira o numero do Contrato</p>
            <div class="lupa">
                <input type="text" maxlength="6" minlength="5">
                <i class="bi bi-search"></i>
            </div>
            <button>Pesquisar</button>
        </div>
        <div class="infoCompleta" id="infoCompleta">
          
        </div>
        <div class="logoFuturo">
            <img src="./src/img/futuro-consultoria-horizonte.png" alt="">
        </div>
    </div>
    <div id="ver">


    </div>

    <script src="./validador.js"></script>
    <script>
        const btnSearch = document.querySelector('button').addEventListener('click', () => {
            
            infoCompleta.innerHTML = ''
            console.log(document.querySelector('input').value)
            pesquisa(document.querySelector('input').value)
           
            const corpoContrato = document.querySelector('.corpoContrato')
            corpoContrato.classList.remove('verde')
            corpoContrato.classList.add('vermeio')
            // infoCompleta.innerHTML = ` <p>O CONTRATO NÃO FOI ENCONTRATO</p>
            // <div class="informacao" >
            //     <p>...</p>
            // </div>`
        })
        function pesquisa(nContrato) {
            //var infoCompleta = document.querySelector('#infoCompleta')
            const corpoContrato = document.querySelector('.corpoContrato')
            

            const data = JSON.parse(localStorage.getItem('registrosContratos'))
            data.map((e) => {                
                if (e.codRegistro == nContrato) {
                    console.log(nContrato == e.codRegistro)
                    corpoContrato.classList.remove('vermeio')
                    corpoContrato.classList.add('verde')
                    infoCompleta.innerHTML = ''
                    corpoContrato.style.backgroundColor = 'blue'
                    infoCompleta.innerHTML = `<p>O CONTRATO É VALIDO</p>
            <div class="informacao" >
                <p>AUTENTICADO: <span>${e.dataRegistro}</span></p>
            </div>`
                } 
                
            })
        }
    </script>
</body>

</html>